{"version":3,"file":"js/200.70026ee1.js","mappings":"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","sources":["webpack://vue-cms/./src/api/live.js","webpack://vue-cms/./src/hooks/getAutoHeight.js","webpack://vue-cms/./src/hooks/quitFn.js","webpack://vue-cms/./src/utils/formatTime.js","webpack://vue-cms/./src/views/course-live/components/reviseLiveDialog.vue","webpack://vue-cms/./src/views/course-live/components/reviseLiveDialog.vue?1413","webpack://vue-cms/./src/views/course-live/index.vue","webpack://vue-cms/./src/views/course-live/index.vue?252e"],"sourcesContent":["import request from \"@/utils/request\";\r\n// 新增直播 \r\nexport const addLive = (data) => {\r\n  return request({\r\n    url: '/live/addLive',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\n// 删除直播 \r\nexport const deleteLive = (data) => {\r\n  return request({\r\n    url: '/live/deleteLive',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取直播列表数据  \r\n\r\nexport const getLiveList = (params) => {\r\n  return request({\r\n    url: '/live/liveList',\r\n    params\r\n  })\r\n}\r\n\r\n// 修改直播 \r\nexport const reviseLive = (data) => {\r\n  return request({\r\n    url: '/live/reviseLive',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}","import { ref, onMounted, onActivated, onDeactivated, onUnmounted } from 'vue'\r\n\r\nexport const getAutoHeight = (marginTop) => {\r\n  // marginTop每个组件传入的高度\r\n  const tableHeight = ref(window.innerHeight - marginTop)\r\n\r\n  // 1.\r\n  const refreshHeight = () => {\r\n    tableHeight.value = window.innerHeight - marginTop\r\n  }\r\n  const refresh = (margin) => {\r\n    marginTop = margin\r\n    tableHeight.value = window.innerHeight - margin\r\n  }\r\n  // 页面挂载\r\n  onMounted(() => {\r\n    // resize尺寸发生变化时\r\n    window.addEventListener('resize', refreshHeight)\r\n  })\r\n  // 页面卸载\r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', refreshHeight)\r\n  })\r\n  // 页面激活\r\n  onActivated(() => {\r\n    window.addEventListener('resize', refreshHeight)\r\n  })\r\n  // 页面失活\r\n  onDeactivated(() => {\r\n    window.removeEventListener('resize', refreshHeight)\r\n  })\r\n  return { tableHeight, refresh }\r\n} ","import { ElMessageBox } from 'element-plus'\r\n\r\nexport const quitFn = ({ contentTxt, titleTxt, confirmButtonText, cancelButtonText, type }, confirmCb, cancelCb) => {\r\n  ElMessageBox.confirm(contentTxt || '当前内容还未保存,确定取消吗', titleTxt || '取消保存', {\r\n    confirmButtonText: confirmButtonText || '确认',\r\n    cancelButtonText: cancelButtonText || '取消',\r\n    type: type || 'warning'\r\n  })\r\n    .then(() => {\r\n      // 用户点了 确认按钮 || 过假留真     过真留假 &&\r\n      confirmCb && confirmCb()\r\n    })\r\n    .catch(() => {\r\n      // 用户点了 取消按钮\r\n      cancelCb && cancelCb()\r\n    })\r\n}\r\n\r\n","export const formatTime = (time) => {\r\n  let date = new Date(time / 1),//转换为数值类型\r\n    year = date.getFullYear(),//年\r\n    // 1-9需要补零  而11补零011所以要截取后面两位\r\n    month = (\"0\" + (date.getMonth() + 1)).slice(-2),//截取字符串最后两位 月\r\n    day = (\"0\" + date.getDate()).slice(-2),//日\r\n    hour = (\"0\" + date.getHours()).slice(-2),//时\r\n    minute = (\"0\" + date.getMinutes()).slice(-2),//分钟\r\n    second = (\"0\" + date.getSeconds()).slice(-2);//秒\r\n\r\n  // 2022-06-21 19:38:26\r\n  return `${year}-${month}-${day} ${hour}:${minute}:${second}`\r\n\r\n}\r\n\r\nexport const formatDate = (time) => {\r\n  let date = new Date(time / 1),\r\n    year = date.getFullYear(),\r\n    month = (\"0\" + (date.getMonth() + 1)).slice(-2),\r\n    day = (\"0\" + date.getDate()).slice(-2),\r\n    week = date.getDay(),\r\n    weekTxt = '周一';\r\n\r\n\r\n  switch (week) {\r\n    case 0:\r\n      weekTxt = '周日'\r\n      break;\r\n    case 1:\r\n      weekTxt = '周一'\r\n      break;\r\n    case 2:\r\n      weekTxt = '周二'\r\n      break;\r\n    case 3:\r\n      weekTxt = '周三'\r\n      break;\r\n    case 4:\r\n      weekTxt = '周四'\r\n      break;\r\n    case 5:\r\n      weekTxt = '周五'\r\n      break;\r\n    case 6:\r\n      weekTxt = '周六'\r\n      break;\r\n\r\n  }\r\n  // 2022-06-21 周四\r\n  return `${year}-${month}-${day} ${weekTxt}`\r\n}\r\n\r\nexport const formatDetail = (time) => {\r\n  let date = new Date(time / 1),\r\n    hour = (\"0\" + date.getHours()).slice(-2),\r\n    minute = (\"0\" + date.getMinutes()).slice(-2),\r\n    second = (\"0\" + date.getSeconds()).slice(-2);\r\n\r\n  // 19:38:26\r\n  return `${hour}:${minute}:${second}`\r\n\r\n}","<template>\r\n  <div class=\"\">\r\n    <el-dialog v-model=\"isOpen\" :before-close=\"close\">\r\n      <template #header> 修改直播 </template>\r\n      <el-form :model=\"queryParams\" :rules=\"rules\" ref=\"formRef\" class=\"form\">\r\n        <el-form-item prop=\"liveName\" label=\"直播标题\">\r\n          <el-input\r\n            v-model=\"queryParams.liveName\"\r\n            clearable\r\n            placeholder=\"请输入直播标题\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"liveTime\" label=\"直播开始时间\">\r\n          <el-date-picker\r\n            v-model=\"queryParams.liveTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"直播开始时间\"\r\n            :default-time=\"defaultTime\"\r\n            clearable\r\n            :disabled-date=\"disabledDateFn\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item prop=\"liveDuration\" label=\"直播时长\">\r\n          <el-input\r\n            v-model=\"queryParams.liveDuration\"\r\n            placeholder=\"请输入直播时长(分钟)\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"teacher\" label=\"讲师\">\r\n          <el-select v-model=\"queryParams.teacher\" clearable>\r\n            <el-option value=\"朱雀\" label=\"朱雀\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"close\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReviseLive\">确认</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, defineExpose, defineProps, defineEmits, nextTick } from \"vue\";\r\nimport { quitFn } from \"@/hooks/quitFn\";\r\nimport { reviseLive } from \"@/api/live\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst props = defineProps([\"liveObj\"]);\r\nconst emit = defineEmits([\"change\"]);\r\nconst isOpen = ref(false);\r\nconst queryParams = ref({\r\n  liveName: \"\",\r\n  liveTime: \"\",\r\n  liveDuration: \"\",\r\n  teacher: \"\",\r\n});\r\nconst formRef = ref(null);\r\nconst rules = ref({\r\n  liveName: [{ required: true, message: \"直播标题是必填项\", trigger: \"blur\" }],\r\n  liveTime: [\r\n    { required: true, message: \"直播开始时间是必填项\", trigger: \"blur\" },\r\n  ],\r\n  liveDuration: [\r\n    { required: true, message: \"直播时长是必填项\", trigger: \"blur\" },\r\n  ],\r\n  teacher: [{ required: true, message: \"讲师是必填项\", trigger: \"blur\" }],\r\n});\r\nconst defaultTime = new Date(2000, 1, 1, 20, 30, 0);\r\n\r\nconst disabledDateFn = (value) => {\r\n  const date = new Date();\r\n  return date >= value; // true disabled  false 可以操作\r\n};\r\nconst close = () => {\r\n  quitFn({}, () => {\r\n    isOpen.value = false;\r\n    formRef.value.resetFields();\r\n  });\r\n};\r\nconst open = () => {\r\n  isOpen.value = true;\r\n  initQueryParams();\r\n};\r\n\r\nconst initQueryParams = async () => {\r\n  await nextTick();\r\n  const liveObj = props.liveObj;\r\n\r\n  const queryParamsValue = queryParams.value;\r\n  for (const key in queryParamsValue) {\r\n    queryParamsValue[key] = liveObj[key];\r\n  }\r\n  console.log(queryParamsValue);\r\n};\r\n\r\nconst submitReviseLive = () => {\r\n  formRef.value.validate(async (value) => {\r\n    if (value) {\r\n      const liveObj = props.liveObj;\r\n      const { data } = await reviseLive({\r\n        ...queryParams.value,\r\n        // 外层id\r\n        _id: liveObj.id,\r\n        // 内层id\r\n        id: liveObj._id,\r\n      });\r\n\r\n      if (!data.code) {\r\n        // 成功了\r\n        ElMessage.success(data.txt);\r\n        isOpen.value = false;\r\n        formRef.value.resetFields();\r\n        emit(\"change\");\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\ndefineExpose({ open });\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n:deep(.el-form-item__label) {\r\n  width: 130px;\r\n}\r\n.form :deep(.el-input) {\r\n  width: 80% !important;\r\n}\r\n</style>\r\n","import script from \"./reviseLiveDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./reviseLiveDialog.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./reviseLiveDialog.vue?vue&type=style&index=0&id=8af5235e&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\cms\\\\vue-first\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8af5235e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"\">\r\n    <el-card>\r\n      <h4>我的直播</h4>\r\n    </el-card>\r\n    <el-card class=\"table\">\r\n      <div class=\"filter-section\">\r\n        <el-date-picker\r\n          v-model=\"queryParams.liveTime\"\r\n          type=\"daterange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开播时间\"\r\n          end-placeholder=\"开播时间\"\r\n          class=\"filter\"\r\n          @change=\"getLiveListFn\"\r\n        />\r\n        <el-input\r\n          v-model=\"queryParams.liveName\"\r\n          placeholder=\"请输入直播名称\"\r\n          class=\"filter\"\r\n          clearable\r\n          @change=\"getLiveListFn\"\r\n        ></el-input>\r\n      </div>\r\n      <el-table\r\n        class=\"table-wrapper\"\r\n        v-loading=\"loading\"\r\n        :data=\"liveList.liveList\"\r\n        :max-height=\"tableHeight\"\r\n      >\r\n        <el-table-column width=\"200\" label=\"上课日期/星期\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.liveTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column width=\"200\" label=\"上课时间\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatDetail(row.liveTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"直播标题\"\r\n          prop=\"liveName\"\r\n        ></el-table-column>\r\n        <el-table-column width=\"200\" label=\"直播状态\" prop=\"className\">\r\n          <template #default=\"{ row }\">\r\n            {{ statusTxt(row.liveTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"直播时长\"\r\n          prop=\"liveDuration\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"班期名称\"\r\n          prop=\"className\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"课程名称\"\r\n          prop=\"courseName\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"讲师\"\r\n          prop=\"teacher\"\r\n        ></el-table-column>\r\n\r\n        <el-table-column width=\"200\" label=\"操作\" fixed=\"right\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <!-- 过了时间的disabled -->\r\n            <el-button\r\n              size=\"small\"\r\n              :disabled=\"row.liveTime < Date.now()\"\r\n              @click=\"openReviseLive(row)\"\r\n            >\r\n              编辑直播\r\n            </el-button>\r\n            <!-- effect=\"dark\"黑色  placement=\"top\"居中 -->\r\n            <el-tooltip effect=\"dark\" placement=\"top\">\r\n              <!-- 在新的页面打开target=\"_new\" -->\r\n              <template #content>\r\n                <a href=\"http://www.baidu.com\" target=\"_new\"\r\n                  >http://www.baidu.com</a\r\n                >\r\n              </template>\r\n              <el-button v-show=\"row.liveTime >= Date.now()\" size=\"small\"\r\n                >进入直播</el-button\r\n              >\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        v-model:current-page=\"queryParams.currentPage\"\r\n        v-model:page-size=\"queryParams.pageSize\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        @size-change=\"getLiveListFn\"\r\n        @current-change=\"getLiveListFn\"\r\n        class=\"pagination\"\r\n      />\r\n    </el-card>\r\n    <reviseLiveDialog\r\n      ref=\"reviseLiveRef\"\r\n      :liveObj=\"liveObj\"\r\n      @change=\"getLiveListFn\"\r\n    ></reviseLiveDialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onActivated, ref } from \"vue\";\r\nimport { getLiveList } from \"@/api/live\"; // 接口\r\nimport { getAutoHeight } from \"@/hooks/getAutoHeight\"; // 高度\r\nimport { formatDate, formatDetail } from \"@/utils/formatTime\"; // 格式化时间\r\nimport reviseLiveDialog from \"./components/reviseLiveDialog.vue\"; // 导入子组件\r\n// 准备数据\r\nconst queryParams = ref({\r\n  liveTime: \"\",\r\n  liveName: \"\",\r\n  currentPage: 1,\r\n  pageSize: 10,\r\n});\r\nconst total = ref(0);\r\nconst loading = ref(true);\r\nconst liveList = ref([]);\r\nconst { tableHeight } = getAutoHeight(340);\r\nconst liveObj = ref({});\r\nconst reviseLiveRef = ref(null);\r\n\r\n// 获取直播的接口函数\r\nconst getLiveListFn = async () => {\r\n  loading.value = true;\r\n  const { data } = await getLiveList(queryParams.value);\r\n  liveList.value = data.data;\r\n  total.value = data.total;\r\n  setTimeout(() => {\r\n    loading.value = false;\r\n  }, 500);\r\n};\r\ngetLiveListFn();\r\n\r\n// 直播的状态函数\r\nconst statusTxt = (time) => {\r\n  // console.log(time); // 获取所有的时间\r\n  let date = new Date();\r\n\r\n  let txt = \"未开播\";\r\n  // 与当前时间比较\r\n  if (time >= date / 1) {\r\n    // 开课时间大于现在  未开播\r\n    txt = \"未开播\";\r\n  } else if (time < date / 1 && time / 1 + 1000 * 60 * 60 * 2 >= date) {\r\n    // 开课时间 小于 现在     开课时间 + 2小时 大于 现在\r\n    txt = \"直播中\";\r\n  } else {\r\n    txt = \"已结束\";\r\n  }\r\n\r\n  return txt;\r\n};\r\n\r\nconst openReviseLive = (row) => {\r\n  liveObj.value = row;\r\n  // 外层id            // 里面有内_id;\r\n  liveObj.value.id = liveList.value._id;\r\n  console.log(liveObj.value);\r\n  reviseLiveRef.value.open();\r\n};\r\nonActivated(getLiveListFn);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n:deep(.el-date-editor) {\r\n  vertical-align: -2px;\r\n  width: 30% !important;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7b17923b&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\cms\\\\vue-first\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7b17923b\"]])\n\nexport default __exports__"],"names":["addLive","data","request","url","method","deleteLive","getLiveList","params","reviseLive","getAutoHeight","marginTop","tableHeight","ref","window","innerHeight","refreshHeight","value","refresh","margin","onMounted","addEventListener","onUnmounted","removeEventListener","onActivated","onDeactivated","quitFn","contentTxt","titleTxt","confirmButtonText","cancelButtonText","type","confirmCb","cancelCb","ElMessageBox","then","catch","formatTime","time","date","Date","year","getFullYear","month","getMonth","slice","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","formatDate","week","getDay","weekTxt","formatDetail","isOpen","queryParams","liveName","liveTime","liveDuration","teacher","formRef","rules","required","message","trigger","defaultTime","disabledDateFn","close","resetFields","open","initQueryParams","async","nextTick","liveObj","props","queryParamsValue","key","console","log","submitReviseLive","validate","_id","id","code","ElMessage","txt","emit","expose","__exports__","currentPage","pageSize","total","loading","liveList","reviseLiveRef","getLiveListFn","setTimeout","statusTxt","openReviseLive","row"],"sourceRoot":""}